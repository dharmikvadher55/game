<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCM with Firebase</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-messaging.js"></script>
    <!-- Include config.js -->
    <script src="config.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Check if firebaseConfig is available
            if (typeof firebaseConfig !== 'undefined') {
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);

                // Initialize Firebase Cloud Messaging
                const messaging = firebase.messaging();

                // Request permission to send notifications
                messaging.requestPermission().then(function() {
                    console.log('Notification permission granted.');
                    // Get the registration token
                    return messaging.getToken();
                }).then(function(token) {
                    console.log('FCM Token:', token);
                    alert('FCM Token: ' + token);
                    // Send the token to your server and save it
                }).catch(function(err) {
                    console.error('Unable to get permission to notify.', err);
                });

                // Handle incoming messages
                messaging.onMessage(function(payload) {
                    console.log('Message received. ', payload);
                    alert('Message received: ' + JSON.stringify(payload));
                    // Customize notification handling
                });
            } else {
                console.error('Firebase configuration not found.');
            }
        });
    </script>
</head>
<body>
    <h1>FCM with Firebase</h1>
    <p>Welcome to the Firebase Cloud Messaging example!</p>
</body>
</html>