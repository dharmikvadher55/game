<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <style>
        .board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
        }

        .checkbox {
            display: none;
        }

        label {
            display: block;
            width: 100px;
            height: 100px;
            background-color: #eee;
            cursor: pointer;
        }

        label:hover {
            background-color: #ddd;
        }
    </style>
</head>
<body>
<h1>Welcome to Tic Tac Toe!</h1>
<div id="gameBoard" class="board">
    <label for="pos1"><input type="checkbox" id="pos1" class="checkbox"></label>
    <label for="pos2"><input type="checkbox" id="pos2" class="checkbox"></label>
    <label for="pos3"><input type="checkbox" id="pos3" class="checkbox"></label>
    <label for="pos4"><input type="checkbox" id="pos4" class="checkbox"></label>
    <label for="pos5"><input type="checkbox" id="pos5" class="checkbox"></label>
    <label for="pos6"><input type="checkbox" id="pos6" class="checkbox"></label>
    <label for="pos7"><input type="checkbox" id="pos7" class="checkbox"></label>
    <label for="pos8"><input type="checkbox" id="pos8" class="checkbox"></label>
    <label for="pos9"><input type="checkbox" id="pos9" class="checkbox"></label>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const checkboxes = document.querySelectorAll('.checkbox');
        let currentPlayer = 'red';

        checkboxes.forEach(addCheckboxChangeListener);

        function addCheckboxChangeListener(checkbox, index) {
            // Add event listener for mouse click
            checkbox.addEventListener('click', function () {
                handleCheckboxClick(this);
            });

            // Add event listener for touch events
            checkbox.addEventListener('touchstart', function (event) {
                event.preventDefault(); // Prevents the default touch behavior
                handleCheckboxClick(this);
            });
        }

        function handleCheckboxClick(checkbox) {
            if (!checkbox.checked) {
                checkbox.checked = true;
                markBox(checkbox);
                if (checkForWin()) {
                    alert("Player " + currentPlayer + " wins!");
                    resetGame();
                } else if (isBoardFull()) {
                    alert("It's a tie!");
                    resetGame();
                } else {
                    switchPlayer();
                }
            }
        }

        function markBox(checkbox) {
            checkbox.parentNode.style.backgroundColor = currentPlayer;
        }

        function switchPlayer() {
            currentPlayer = (currentPlayer === 'red') ? 'blue' : 'red';
        }

        function checkForWin() {
            const winningCombinations = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8],
                [0, 3, 6], [1, 4, 7], [2, 5, 8],
                [0, 4, 8], [2, 4, 6]
            ];

            return winningCombinations.some(function (combination) {
                const [a, b, c] = combination;
                return (
                    checkboxes[a].parentNode.style.backgroundColor !== '' &&
                    checkboxes[a].parentNode.style.backgroundColor === checkboxes[b].parentNode.style.backgroundColor &&
                    checkboxes[a].parentNode.style.backgroundColor === checkboxes[c].parentNode.style.backgroundColor
                );
            });
        }

        function isBoardFull() {
            return Array.from(checkboxes).every(function (checkbox) {
                return checkbox.parentNode.style.backgroundColor !== '';
            });
        }

        function resetGame() {
            checkboxes.forEach(function (checkbox) {
                checkbox.checked = false;
                checkbox.parentNode.style.backgroundColor = '';
            });
            currentPlayer = 'red';
        }
    });
</script>
</body>
</html>
